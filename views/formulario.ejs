<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <title>Evaluación Académica</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body class="bg-light">
    <div class="container mt-5 animate__animated animate__fadeIn">
      <h2>Formulario de Evaluación</h2>
      <form method="POST">
      <div class="mb-3">
        <label class="form-label">Nombre del estudiante:</label>
        <input type="text" name="nombre" class="form-control" required>
      </div>

      <% preguntas.forEach((p, i) => {
        const rec = recomendacionesPreguntas.find(r => r.indice === i);
      %>
        <div class="mb-3">
          <label class="form-label <%= rec ? 'text-danger' : '' %>"><strong><%= i+1 %>. <%= p %></strong></label>
          <select name="p<%= i+1 %>" class="form-select <%= rec ? 'border border-danger' : '' %>" required>
            <option value="3" <%= respuestas[i] === 3 ? 'selected' : '' %>>Excelente / Siempre / Frecuente</option>
            <option value="2" <%= respuestas[i] === 2 ? 'selected' : '' %>>Bueno / A veces / Parcial</option>
            <option value="1" <%= respuestas[i] === 1 ? 'selected' : '' %>>Poco / Rara vez</option>
            <option value="0" <%= respuestas[i] === 0 ? 'selected' : '' %>>Nunca / Nada / Muy mal</option>
          </select>
          <% if (rec) { %>
            <div class="form-text text-danger"><%= rec.sugerencia %></div>
          <% } %>
        </div>
      <% }) %>

      <button type="submit" class="btn btn-primary">Enviar evaluación</button>
      </form>

      <div id="resultado" class="mt-4"></div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/js/formulario.js"></script>
  </body>
  </html>
